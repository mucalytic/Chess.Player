var CountdownHelper=function(){function t(){this.counter=60,this.enabled=!1,this.utterances=[60]}return t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.username=function(){return document.getElementById("four-player-username").innerText},t.prototype.avatar=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n instanceof HTMLElement&&n.classList.contains("player-avatar"))return n}},t.prototype.current=function(t){return parseFloat(t.oldValue.trim().split(":")[1])},t.prototype.reset=function(t){if("childList"===t.type&&t.target instanceof HTMLDivElement&&0===t.target.classList.length&&1===t.addedNodes.length){var e=t.addedNodes[0];if(e instanceof HTMLElement&&e.classList.contains("modal-container"))e.querySelector(".game-over-container")&&(console.log("Reset happened"),this.utterances=[60],this.counter=60)}},t.prototype.utter=function(t){if(this.enabled&&"characterData"===t.type){var e=t.target.parentNode.parentNode;if(e&&e instanceof HTMLElement&&e.classList.contains("player-clock-timer")){var n=this.avatar(e.childNodes);if(n&&n instanceof HTMLAnchorElement&&n.pathname==="/member/"+this.username()){var o=this.current(t);if(this.counter-o>0&&this.counter-o<=1&&(this.counter=o),this.counter%5==0&&this.counter!==this.utterances[0]){var r=this.counter+" seconds left",i=new SpeechSynthesisUtterance(r);i.rate=1.8,window.speechSynthesis.speak(i),this.utterances.unshift(this.counter)}}}}},t}(),DomWatcher=function(){function t(){this.records=[],this.countdown=new CountdownHelper,this.init={characterDataOldValue:!0,attributeOldValue:!0,characterData:!0,attributes:!0,childList:!0,subtree:!0},this.createDocumentBodyObserverSubscription(),this.observer.observe(document.body,this.init)}return t.prototype.createDocumentBodyObserverSubscription=function(){var t=this;this.subject=new Rx.Subject,this.observer=new MutationObserver(function(e){e.forEach(function(e){return t.subject.onNext(e)})}),this.subscription=this.subject.subscribe(function(e){t.records.push(e),t.countdown.reset(e),t.countdown.utter(e)},function(e){console.log("Rx: Exception: %o",e),t.observer.disconnect()},function(){console.log("Rx: Completed"),t.observer.disconnect()})},t}(),DomModifier=function(){function t(){this.countdownHelper=new CountdownHelper,this.domWatcher=new DomWatcher,this.rightAlignStartButton(),this.addStartAiButton()}return t.prototype.addStartAiButton=function(){var t=this,e=document.getElementsByClassName("btns-container")[0];if(e instanceof HTMLElement){e.style.cssFloat="right";var n=e.cloneNode(!0);if(n instanceof HTMLElement){n.style.cssFloat="left",n.style.marginRight="12px";var o=n.firstChild;"A"===o.nodeName&&o instanceof HTMLElement&&(o.innerText="Start AI",o.classList.remove("new-game-btn"));var r=n.cloneNode(!0);if(r instanceof HTMLElement){r.style.display="none";var i=r.firstChild;"A"===i.nodeName&&i instanceof HTMLElement&&(i.innerText="Stop AI",i.style.color="#b4b4b3",i.style.borderBottom="#272422",i.style.backgroundColor="#272422",i.addEventListener("click",function(){t.countdownHelper.enable(),n.style.display="block",r.style.display="none"})),o.addEventListener("click",function(){t.countdownHelper.disable(),r.style.display="block",n.style.display="none"})}e.parentNode.appendChild(n),e.parentNode.appendChild(r)}}return this},t.prototype.rightAlignStartButton=function(){var t=document.getElementsByTagName("head")[0];if(t instanceof HTMLElement){var e=document.createTextNode(".btns-container { float: right; }"),n=document.createElement("style");n instanceof HTMLElement&&(n.type="text/css",n.appendChild(e)),t.appendChild(n)}return this},t}(),modifier=new DomModifier;