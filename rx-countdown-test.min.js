var CountdownHelper=function(){function t(){this.counter=60,this.utterances=[60]}return t.prototype.username=function(){return document.getElementById("four-player-username").innerText},t.prototype.avatar=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n instanceof HTMLElement&&n.classList.contains("player-avatar"))return n}},t.prototype.current=function(t){return parseFloat(t.oldValue.trim().split(":")[1])},t.prototype.reset=function(t){if("childList"===t.type&&t.target instanceof HTMLDivElement&&0===t.target.classList.length&&1===t.addedNodes.length){var e=t.addedNodes[0];if(e instanceof HTMLElement&&e.classList.contains("modal-container"))e.querySelector(".game-over-container")&&(console.log("Reset happened"),this.utterances=[60],this.counter=60)}},t.prototype.utter=function(t){if("characterData"===t.type){var e=t.target.parentNode.parentNode;if(e&&e instanceof HTMLElement&&e.classList.contains("player-clock-timer")){var n=this.avatar(e.childNodes);if(n&&n instanceof HTMLAnchorElement&&n.pathname==="/member/"+this.username()){var r=this.current(t);if(this.counter-r>0&&this.counter-r<=1&&(this.counter=r),this.counter%5==0&&this.counter!==this.utterances[0]){var o=this.counter+" seconds left",s=new SpeechSynthesisUtterance(o);s.rate=1.8,window.speechSynthesis.speak(s),this.utterances.unshift(this.counter)}}}}},t}(),DomManipulator=function(){function t(){this.src="https://rawgit.com/Reactive-Extensions/RxJS/master/dist/rx.all.min.js",this.addScriptTags(this.src)}return t.prototype.addScriptTags=function(t){for(var e=document.getElementsByTagName("script"),n=0;n<e.length;n++)if(e[n].src===t)return;var r=document.createElement("script");document.body.appendChild(r),r.src=t},t}(),DomWatcher=function(){function t(){this.records=[],this.countdown=new CountdownHelper,this.init={characterDataOldValue:!0,attributeOldValue:!0,characterData:!0,attributes:!0,childList:!0,subtree:!0},this.createDocumentBodyObserverSubscription(),this.observer.observe(document.body,this.init)}return t.prototype.createDocumentBodyObserverSubscription=function(){var t=this;this.subject=new Rx.Subject,this.observer=new MutationObserver(function(e){e.forEach(function(e){return t.subject.onNext(e)})}),this.subscription=this.subject.subscribe(function(e){t.records.push(e),t.countdown.reset(e),t.countdown.utter(e)},function(e){console.log("Rx: Exception: %o",e),t.observer.disconnect()},function(){console.log("Rx: Completed"),t.observer.disconnect()})},t}(),manipulator=new DomManipulator;